---
layout:     post
title:      流媒体服务器部署
subtitle:   音视频开发基础-流媒体服务器
date:       2020-12-31
author:     yym439
header-img: img/post-bg-github-cup.jpg
catalog: true
tags:
    - Blog
---

## 一、Nginx搭建流媒体服务器

### 1. 编译安装nginx服务

- [下载nginx源码](http://nginx.org/en/download.html)
- [下载nginx-rtmp-module](https://github.com/arut/nginx-rtmp-module)

- 编译安装nginx：
    ```
    ./configure --add-module=/path/to/nginx-rtmp-module
    make
    make install
    ```

### 2. nginx配置文件，配置RTMP服务

```
nginx.conf文件：
rtmp{
    server{

        #指定RTMP服务端口
        listen 1935;
        chunk_size 4000;
        
        #指定流应用
        application live
        {
            live on;
            allow play all;
        }
    }
}
```
- 启动nginx:
```
sudo ./sbin/nginx -c ./conf/nginx.conf

推拉流访问：rtmp://localhost/live/6666
ffmpeg：推流
fplay：拉流
```

## 二、SRS流媒体服务器
### SRS单机部署

[SRS源码地址](https://github.com/ossrs/srs)

### SRS集群部署
部署多个源站和多个边缘，形成源站集群:
- SRS边缘集群(拉流，访问边缘节点)
- SRS源节点集群（推流，访问源节点）
- [博客](https://blog.csdn.net/weicaijiang/article/details/105116392)
- [github wiki](https://github.com/ossrs/srs/wiki/v3_CN_SampleOriginCluster)

